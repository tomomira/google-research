# Google検索リサーチツール - 要件定義書

バージョン: 1.0
作成日: 2025年11月28日
ステータス: 承認待ち

---

## 1. プロジェクト概要

### 1.1 プロジェクト名
Google検索リサーチツール（Google Research Tool）

### 1.2 目的
クラウドワークスなどのリサーチ案件における情報収集作業を自動化・効率化し、作業時間の短縮と品質向上を実現する。

### 1.3 スコープ
**本プロジェクトに含まれるもの:**
- Google検索結果の自動取得
- 検索結果からの基本情報抽出（タイトル、URL、説明文）
- Webページからの詳細情報抽出（電話番号、住所、メールアドレス等）
- Excel形式でのデータ出力
- デスクトップGUIアプリケーション
- 検索設定のプリセット管理

**本プロジェクトに含まれないもの:**
- Google Custom Search API連携（Phase 1では対象外、将来拡張として検討）
- Googleマップ情報の取得
- クラウド版・Web版アプリケーション
- 自動スケジュール実行機能

### 1.4 対象ユーザー
- クラウドワークスでリサーチ案件を受注するワーカー
- 営業リスト作成業務を行う事業者
- 市場調査・競合調査担当者
- 情報収集業務の効率化を求める個人・法人

---

## 2. ビジネス要件

### 2.1 解決すべき課題
1. 手作業でのGoogle検索・情報収集には時間がかかる
2. 大量の検索結果を効率的に整理する仕組みがない
3. 収集した情報をExcelにまとめる作業が煩雑
4. 同様の検索パターンを繰り返し実行する必要がある

### 2.2 期待される効果
1. リサーチ作業時間の70%削減
2. データ収集の品質向上（漏れ・ミスの削減）
3. 繰り返し作業の自動化によるストレス軽減
4. より多くの案件受注が可能になる

### 2.3 成功基準
1. 100件の検索結果を3分以内に取得できる
2. 抽出精度90%以上（電話番号、住所等の基本情報）
3. ユーザーが直感的に操作できるUI（初回利用でマニュアル不要）
4. 安定動作（100件処理でエラー発生率5%以下）

---

## 3. 機能要件

### 3.1 検索機能（必須）

#### 3.1.1 基本検索
| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-001 | キーワード検索 | 単一または複数キーワードによる検索 | 高 |
| F-002 | AND検索 | 複数キーワードの組み合わせ検索 | 高 |
| F-003 | OR検索 | いずれかのキーワードでの検索 | 中 |
| F-004 | 除外検索 | マイナス検索（特定キーワードを除外） | 中 |
| F-005 | フレーズ検索 | 完全一致検索（引用符での囲み） | 中 |
| F-006 | 検索件数指定 | 10件、20件、50件、100件から選択 | 高 |

#### 3.1.2 高度な検索オプション
| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-007 | サイト内検索 | site:演算子による特定サイト内検索 | 中 |
| F-008 | 期間指定 | 過去24時間、1週間、1ヶ月、1年、カスタム | 低 |
| F-009 | 地域指定 | 日本国内の都道府県指定 | 中 |
| F-010 | 言語指定 | 日本語のみ、英語のみ等 | 低 |

### 3.2 データ収集機能

#### 3.2.1 標準収集項目（必須）
| 機能ID | 収集項目 | 説明 | 優先度 |
|--------|----------|------|--------|
| F-011 | ページタイトル | 検索結果のタイトル | 高 |
| F-012 | URL | ページのURL | 高 |
| F-013 | 説明文 | メタディスクリプション/スニペット | 高 |
| F-014 | 検索順位 | 検索結果での表示順位 | 中 |

#### 3.2.2 詳細情報収集（オプション）
| 機能ID | 収集項目 | 説明 | 優先度 |
|--------|----------|------|--------|
| F-015 | 電話番号 | Webページから電話番号を抽出 | 高 |
| F-016 | メールアドレス | Webページからメールアドレスを抽出 | 中 |
| F-017 | 住所情報 | 都道府県、市区町村、番地を抽出 | 高 |
| F-018 | FAX番号 | FAX番号を抽出 | 低 |
| F-019 | 会社名/店舗名 | 組織名を抽出 | 中 |
| F-020 | SNSリンク | Twitter, Instagram, Facebook等のリンク抽出 | 低 |

#### 3.2.3 カスタム抽出（将来拡張）
| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-021 | 正規表現抽出 | ユーザー定義の正規表現パターンで抽出 | 低 |
| F-022 | CSSセレクタ抽出 | CSSセレクタによる要素抽出 | 低 |

### 3.3 出力機能

#### 3.3.1 Excel出力（必須）
| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-023 | XLSX出力 | openpyxlによるExcel形式出力 | 高 |
| F-024 | ヘッダー行生成 | 列名の自動生成 | 高 |
| F-025 | 列幅自動調整 | 内容に応じた列幅の調整 | 中 |
| F-026 | ファイル名指定 | 出力ファイル名のカスタマイズ | 中 |
| F-027 | 重複除去 | URLベースでの重複データ除去 | 高 |

#### 3.3.2 その他出力形式（将来拡張）
| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-028 | CSV出力 | CSV形式での出力 | 低 |
| F-029 | JSON出力 | JSON形式での出力 | 低 |

### 3.4 UI/UX機能

#### 3.4.1 メイン画面
| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-030 | 検索設定入力 | キーワード、オプション設定UI | 高 |
| F-031 | 抽出項目選択 | チェックボックスによる項目選択 | 高 |
| F-032 | 実行制御 | 開始、停止、一時停止ボタン | 高 |
| F-033 | 進捗表示 | プログレスバーと処理件数表示 | 高 |
| F-034 | 結果プレビュー | テーブル形式でのリアルタイム表示 | 中 |
| F-035 | ログ表示 | 処理状況のログ出力エリア | 中 |

#### 3.4.2 設定管理
| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-036 | プリセット保存 | 検索設定の保存 | 中 |
| F-037 | プリセット読込 | 保存した設定の読み込み | 中 |
| F-038 | 待機時間設定 | ページアクセス間隔の設定 | 高 |
| F-039 | 出力先設定 | デフォルト出力フォルダの設定 | 中 |

### 3.5 エラーハンドリング・安定性

| 機能ID | 機能名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| F-040 | エラー時データ保存 | 処理中断時に途中結果を保存 | 高 |
| F-041 | リトライ機能 | ネットワークエラー時の自動リトライ | 中 |
| F-042 | CAPTCHA検出 | CAPTCHA表示時の処理停止 | 高 |
| F-043 | タイムアウト処理 | ページ読み込みタイムアウトの設定 | 中 |

---

## 4. 非機能要件

### 4.1 パフォーマンス要件
| 要件ID | 項目 | 目標値 | 測定方法 |
|--------|------|--------|----------|
| NF-001 | 検索結果取得速度 | 100件を3分以内 | 実測 |
| NF-002 | 詳細情報取得速度 | 1ページあたり3-5秒 | 実測 |
| NF-003 | Excel出力速度 | 100件を10秒以内 | 実測 |
| NF-004 | メモリ使用量 | 500MB以下 | タスクマネージャー確認 |

### 4.2 可用性・信頼性
| 要件ID | 項目 | 目標値 |
|--------|------|--------|
| NF-005 | エラー発生率 | 100件処理で5%以下 |
| NF-006 | データ保存成功率 | 99%以上 |
| NF-007 | 連続稼働時間 | 最低2時間 |

### 4.3 ユーザビリティ
| 要件ID | 項目 | 基準 |
|--------|------|------|
| NF-008 | 学習時間 | 初回利用から30分以内に基本操作習得 |
| NF-009 | UI言語 | 日本語 |
| NF-010 | エラーメッセージ | 日本語でわかりやすい内容 |
| NF-011 | ヘルプ機能 | 各機能の簡易説明を提供 |

### 4.4 保守性・拡張性
| 要件ID | 項目 | 基準 |
|--------|------|------|
| NF-012 | コード品質 | PEP8準拠 |
| NF-013 | モジュール化 | 機能ごとに独立したモジュール |
| NF-014 | 設定外部化 | ハードコードを避け設定ファイル化 |
| NF-015 | ログ出力 | デバッグ用の詳細ログ |

### 4.5 セキュリティ・コンプライアンス
| 要件ID | 項目 | 対策 |
|--------|------|------|
| NF-016 | robots.txt遵守 | 各サイトのrobots.txtをチェック |
| NF-017 | アクセス間隔 | 最低3秒の待機時間を設定 |
| NF-018 | User-Agent設定 | 適切なUser-Agentヘッダー |
| NF-019 | 利用規約遵守 | 過度なアクセスを避ける仕組み |

---

## 5. 技術要件

### 5.1 開発環境
| 項目 | 仕様 |
|------|------|
| 開発言語 | Python 3.10以上 |
| 推奨エディタ | VSCode, PyCharm |
| バージョン管理 | Git |

### 5.2 実行環境
| 項目 | 仕様 |
|------|------|
| OS | Windows 10/11, macOS, Linux |
| Pythonバージョン | 3.10以上 |
| 必要メモリ | 4GB以上 |
| ネットワーク | インターネット接続必須 |
| ブラウザ | Chrome/Chromium（Selenium用） |

### 5.3 依存ライブラリ
| ライブラリ | バージョン | 用途 |
|-----------|----------|------|
| selenium | 4.x | ブラウザ自動操作 |
| beautifulsoup4 | 4.x | HTML解析 |
| requests | 2.x | HTTP通信 |
| openpyxl | 3.x | Excel操作 |
| pandas | 2.x | データ処理 |
| tkinter | 標準ライブラリ | GUI（基本） |
| customtkinter | 5.x | GUI（モダン） |

### 5.4 外部サービス
| サービス | 用途 | 必須/オプション |
|---------|------|----------------|
| Google検索 | 検索結果取得 | 必須 |
| ChromeDriver | Selenium実行 | 必須 |

---

## 6. 制約事項

### 6.1 技術的制約
1. Google検索結果のHTML構造変更により機能が停止する可能性がある
2. JavaScript動的レンダリングページは取得に時間がかかる
3. ログインが必要なページは情報取得不可
4. CAPTCHAが表示された場合は処理を中断する必要がある

### 6.2 法的・規約的制約
1. Googleの利用規約に抵触する可能性があるため、過度なアクセスは禁止
2. 各Webサイトのrobots.txtを遵守する必要がある
3. 個人情報保護法に配慮した情報収集を行う
4. 商用利用時はGoogle Custom Search API利用を推奨

### 6.3 運用上の制約
1. 1日あたりの検索回数を制限することを推奨（目安：100回以内）
2. アクセス間隔は最低3秒以上を設定
3. 大量データ収集時は複数日に分けて実行

---

## 7. リスクと対策

| リスクID | リスク内容 | 影響度 | 発生確率 | 対策 |
|---------|-----------|--------|---------|------|
| R-001 | Google側の仕様変更 | 高 | 中 | HTML構造の定期確認、柔軟なパース処理 |
| R-002 | CAPTCHA頻発 | 中 | 中 | 適切な待機時間、検出時の処理停止 |
| R-003 | IPブロック | 高 | 低 | アクセス間隔の遵守、プロキシ対応検討 |
| R-004 | 抽出精度の低下 | 中 | 中 | 正規表現の改善、テストケース拡充 |
| R-005 | パフォーマンス低下 | 低 | 低 | 非同期処理の導入、キャッシュ活用 |
| R-006 | クロスプラットフォーム問題 | 中 | 低 | 各OS環境でのテスト実施 |

---

## 8. 受入基準

### 8.1 機能受入基準
- [ ] 指定キーワードでGoogle検索が実行できる
- [ ] 検索結果（タイトル、URL、説明文）を取得できる
- [ ] 詳細情報（電話番号、住所）を抽出できる
- [ ] Excel形式でデータ出力できる
- [ ] 重複データが除去される
- [ ] エラー発生時に途中結果が保存される

### 8.2 非機能受入基準
- [ ] 100件の検索結果を3分以内に取得できる
- [ ] GUIが直感的で初回利用者でも操作可能
- [ ] エラーメッセージが日本語でわかりやすい
- [ ] Windows/macOSで動作する

### 8.3 品質基準
- [ ] 単体テストカバレッジ70%以上
- [ ] 主要機能の統合テスト完了
- [ ] PEP8準拠（Linterチェック通過）
- [ ] ドキュメント整備（README, ユーザーマニュアル）

---

## 9. ドキュメント成果物

| ドキュメント名 | 内容 | 担当 | 期限 |
|--------------|------|------|------|
| 要件定義書 | 本ドキュメント | 開発チーム | 完了 |
| 実装計画書 | 詳細設計・開発スケジュール | 開発チーム | 次工程 |
| API設計書 | モジュール間インターフェース | 開発チーム | Phase 1開始前 |
| テスト計画書 | テスト項目・手順 | 開発チーム | Phase 3開始前 |
| ユーザーマニュアル | 操作手順書 | 開発チーム | Phase 4 |
| README.md | インストール・セットアップ手順 | 開発チーム | Phase 4 |

---

## 10. 承認

| 役割 | 氏名 | 承認日 | 署名 |
|------|------|--------|------|
| プロジェクトオーナー | - | 2025-11-28 | - |
| 開発リーダー | - | 2025-11-28 | - |

---

## 変更履歴

| バージョン | 日付 | 変更内容 | 変更者 |
|-----------|------|---------|--------|
| 1.0 | 2025-11-28 | 初版作成 | - |
